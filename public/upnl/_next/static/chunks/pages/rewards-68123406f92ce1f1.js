(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{1572:function(e){var t;t=()=>(()=>{"use strict";let e,t;var s={d:(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)},n={};s.d(n,{default:()=>o});let a=(...e)=>{},l=e=>null!==e&&"Object"===(null==e?void 0:e.constructor.name),i=()=>{if(!e){e=!0;try{(t=c.storage||localStorage).getItem("")}catch{t=(()=>{let e={getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{t[e]=void 0},clear:()=>{t={__proto__:e}}},t={__proto__:e};return t})()}d()}},r=(e,t,s=!0)=>s?[...JSON.stringify(e)].map(e=>String.fromCharCode(e.charCodeAt(0)+t)).join(""):JSON.parse([...e].map(e=>String.fromCharCode(e.charCodeAt(0)-t)).join("")),c={ttl:null,encrypt:!1,encrypter:r,decrypter:(e,t)=>r(e,t,!1),secret:75,storage:void 0};Object.seal(c);let d=(e=!1)=>{for(let s of(i(),Object.keys(t))){let n;let a=t.getItem(s);try{n=JSON.parse(a||"")}catch{continue}l(n)&&"\0"in n&&(Date.now()>n.ttl||e)&&t.removeItem(s)}},o={config:c,set:(e,s,n={})=>{i();let l={...c,...n,encrypt:!1!==n.encrypt&&(n.encrypt||c.encrypt),ttl:null===n.ttl?null:n.ttl||c.ttl};try{let n=l.ttl&&!isNaN(l.ttl)&&l.ttl>0,i=n?{"\0":s,ttl:Date.now()+1e3*l.ttl}:s;l.encrypt&&(n?i["\0"]=(l.encrypter||a)(i["\0"],l.secret):i=(l.encrypter||a)(i,l.secret)),t.setItem(e,JSON.stringify(i))}catch{return!1}},get:(e,s={})=>{let n,r;i();let d=t.getItem(e),o={...c,...s,encrypt:!1!==s.encrypt&&(s.encrypt||c.encrypt),ttl:null===s.ttl?null:s.ttl||c.ttl};try{n=JSON.parse(d||""),r=l(n)&&"\0"in n,(o.decrypt||o.encrypt)&&(r?n["\0"]=(o.decrypter||a)(n["\0"],o.secret):n=(o.decrypter||a)(n,o.secret))}catch{}return r?Date.now()>n.ttl?(t.removeItem(e),null):n["\0"]:void 0!==n?n:d},flush:d,clear:()=>{i(),t.clear()},remove:e=>{i(),t.removeItem(e)}};return n.default})(),e.exports=t()},2197:function(e,t,s){(window.__NEXT_P=window.__NEXT_P||[]).push(["/rewards",function(){return s(2698)}])},4582:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var n=s(4817),a=s(5106),l=s(6505),i=s(8398);function r(e){let{balance:t,token:s,suffix:r,decimalScale:c}=e,d="string"==typeof s?l.no[s]:s,o=(0,l.NV)(d,t),m=d?d.DisplayDecimalScale:i.bt;return c&&c>0&&(m=c),(0,n.jsx)(a.h3,{value:o,displayType:"text",decimalScale:m,thousandSeparator:",",suffix:r})}},9034:function(e,t,s){"use strict";var n=s(4817),a=s(1248),l=s(5549),i=s(4926),r=s(6064),c=s(1808),d=s(2564),o=s(8337),m=s(1019),u=s(4582),x=s(6505);t.Z=e=>{let{data:t,xKey:s,barKeys:p,colors:h}=e,[f,y]=(0,a.useState)(0),[g,j]=(0,a.useState)(0);(0,a.useEffect)(()=>{t.length,y(0),j(0)},[t]);let v=e=>{let{x:t,y:s,width:a,value:l}=e;return 0===l?null:(0,n.jsx)("text",{x:t+a/2,y:s-6,textAnchor:"middle",fill:"#666",fontSize:11,fontWeight:"bold",className:"z-[999]",children:(0,m.ZP)(l)})},b=null==t?void 0:t.map(e=>({...e,total:p.reduce((t,s)=>t+(e[s]||0),0)}));return(0,n.jsx)("div",{className:"w-full h-72",children:(0,n.jsx)(l.h,{width:"100%",height:"100%",children:(0,n.jsxs)(i.v,{data:b||[],barGap:10,margin:{bottom:20,top:15},children:[(0,n.jsx)(r.K,{interval:g,tickLine:!1,axisLine:!1,dataKey:s,tick:(0,n.jsx)(e=>{let{x:t,y:s,payload:a}=e,[l,i]=a.value.split(" ");return(0,n.jsx)("g",{transform:"translate(".concat(t,",").concat(s,")"),children:(0,n.jsx)("text",{x:0,y:0,dy:0===f?18:10,textAnchor:0===f?"middle":"end",transform:"rotate(".concat(f,")"),className:"text-[9px] text-center 2xl:text-[11px] z-[999]",fill:"#666",children:0===f?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("tspan",{x:"0",dy:"10",children:i}),(0,n.jsx)("tspan",{x:"0",dy:"15",children:l})]}):a.value})})},{})}),(0,n.jsx)(c.u,{cursor:{fill:"transparent"},content:(0,n.jsx)(e=>{let{active:t,payload:s,label:a}=e;return t&&s&&s.length?(0,n.jsxs)("div",{className:"custom-tooltip bg-gray-200 border px-3 py-2 rounded-[16px] shadow text-[12px] text-[#666]",children:[(0,n.jsx)("p",{className:"label font-bold",children:a}),s.map(e=>(0,n.jsxs)("p",{className:"label",children:[e.name,": ",(0,n.jsx)(u.Z,{token:x.yA,balance:e.value||0,suffix:" pt"})]},e.dataKey))]}):null},{})}),p.map((e,t)=>(0,n.jsx)(d.$,{dataKey:p[p.length-1-t],fill:h[p.length-1-t],stackId:"a",barSize:24,strokeWidth:1,stroke:"#ffffff",radius:[5,5,5,5],children:t===p.length-1&&(0,n.jsx)(o.e,{dataKey:"total",content:(0,n.jsx)(v,{})})},e))]})})})}},9634:function(e,t,s){"use strict";s.d(t,{Z:function(){return h}});var n=s(4817),a=s(7833),l=s(1248),i=s(5019),r=s.n(i),c=s(8735),d=s.n(c),o=s(6895),m=s(2786),u=s(8071),x=s(9034),p=s(2342);function h(e){let{minimal:t}=e,[s,i]=(0,l.useState)("day"),{data:c}=function(e){let[t,s]=(0,l.useState)(!0),{data:n}=(0,o.ZP)("/meshmain/rewards/user/totals?group_by=".concat(e),async function(e){try{return s(!0),(await (0,m._i)(e)).data}catch(e){throw(0,u.C)(e)}finally{s(!1)}});return{data:n,loading:t}}(s),{t:h}=(0,a.Z)("common"),f=(0,p.ac)({query:"(max-width: 1024px)"}),[y,g]=(0,l.useState)([]);return(0,l.useEffect)(()=>{if(Array.isArray(c)){let e=c.map(e=>({...e,period:"day"===s?r()(e.period).format("MMM DD"):r()(e.period).format("YY MMM"),Mining:e.mining_amount,Referral:e.referral_amount,Task:e.mission_amount}));"day"===s?g(f?e.slice(-7):e.slice(t?-14:-30)):g(e.slice(-12))}},[c,s,f]),(0,n.jsxs)("div",{className:"bg-white p-5 rounded-[16px] mt-6 col-span-1 lg:col-span-8",children:[(0,n.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,n.jsx)("h3",{className:"text-md font-semibold text-black",children:h("reward_stats")}),(0,n.jsxs)("div",{className:"flex bg-gray-200 rounded-[16px] h-[30px]",children:[(0,n.jsx)("button",{className:"flex-1 min-w-[87px] px-4 py-1 text-sm font-medium rounded-full text-center ".concat("day"===s?"bg-black text-white":""),onClick:()=>i("day"),children:h("daily")}),(0,n.jsx)("button",{className:"flex-1 px-4 py-1 text-sm font-medium rounded-full text-center ".concat("month"===s?"bg-black text-white":""),onClick:()=>i("month"),children:h("monthly")})]})]}),y.length?(0,n.jsx)(x.Z,{data:y,xKey:"period",barKeys:["Mining","Referral","Task"],colors:["#00C853","#2979FF","#FFCC00"]}):(0,n.jsx)("div",{className:"flex h-[200px] justify-center items-center w-full text-secondary",children:(0,n.jsxs)("div",{className:"max-w-[370px] text-center",children:[(0,n.jsx)(d(),{className:"mx-auto mb-2",src:"/assets/images/empty_state.svg",alt:"Icon Empty",width:64,height:40}),(0,n.jsx)("span",{className:"max-w-[100px]",children:"No rewards data yet. Start contributing to see your progress here!"})]})}),(0,n.jsxs)("div",{className:"flex space-x-4 mt-6",children:[(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-[22px] h-[22px] bg-green-500 rounded-full mr-2"}),(0,n.jsx)("span",{className:"text-gray-600",children:h("mining")})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-[22px] h-[22px] bg-blue-500 rounded-full mr-2"}),(0,n.jsx)("span",{className:"text-gray-600",children:h("referrals")})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("span",{className:"w-[22px] h-[22px] bg-[#FFCC00] rounded-full mr-2"}),(0,n.jsx)("span",{className:"text-gray-600",children:h("tasks")})]})]})]})}},2698:function(e,t,s){"use strict";s.r(t),s.d(t,{__N_SSG:function(){return Z},default:function(){return A}});var n=s(4817),a=s(1248),l=s(3590),i=s(2672),r=s(4953),c=s(2786),d=s(8071),o=()=>{let[e,t]=(0,a.useState)(!1);return{loading:e,claimMission:async e=>{if(e)try{t(!0),await (0,c.CL)("/meshmain/mission/claim",{mission_id:e})}catch(e){throw(0,d.C)(e)}finally{t(!1)}}}},m=s(6895),u=s(7518),x=s.n(u),p=s(3259),h=s(8735),f=s.n(h),y=s(1572),g=s.n(y),j=s(4878);let v=e=>"/mission/client_task_state/"+e;var b=s(6505),w=s(2801);let N={CLICK_LINK:function(e){let{state:t,mutate:s}=function(e){let{data:t,mutate:s}=(0,m.ZP)(v(e),function(){return g().get("client_task_"+e)});return{state:t,mutate:s}}(e.taskId),{update:l}=function(e,t){let{trigger:s}=(0,j.Z)(v(e),async function(t,s){let{arg:n}=s;return null===n?(g().remove("client_task_"+e),null):(g().set("client_task_"+e,n,{ttl:300}),n)},{populateCache:!0,optimisticData:!0});return{update:s}}(e.taskId,0),i=async()=>{if(!e.task.payload)return;await l("clicked");let t=e.task.payload;window.open(t,"_blank")};return(0,a.useEffect)(()=>{if(t){var n;s().then(),null===(n=e.onFinished)||void 0===n||n.call(e)}},[t]),(0,n.jsx)(n.Fragment,{children:!t&&(0,n.jsx)("button",{className:"bg-[#F1F1F1] w-full cursor-pointer text-gray-700 font-bold py-3 px-4 rounded-[20px]",onClick:i,children:e.task.name})})},WAIT:function(e){let[t,s]=(0,a.useState)(parseFloat(e.task.payload));return((0,a.useEffect)(()=>{var n;if(t>0){let e=setTimeout(()=>s(t-1),1e3);return()=>clearTimeout(e)}null===(n=e.onFinished)||void 0===n||n.call(e)},[t]),t<=0)?null:(0,n.jsx)("button",{className:"bg-[#F1F1F1] w-full text-gray-700 font-bold py-3 px-4 rounded-[20px] cursor-default",disabled:!0,children:t>0?"Checking ".concat(t,"s"):"Start Task"})}};var _=function(e){let[t,s]=(0,a.useState)(0),{claimMission:l,loading:i}=o();if(e.mission.claimed_at){let t=e.clientTasks.find(e=>"CLICK_LINK"===e.type);return(0,n.jsx)("button",{className:"bg-green-500 text-white w-full font-bold py-3 px-4 rounded-[20px] cursor-pointer",disabled:!t,onClick:()=>t&&window.open(t.payload,"_blank"),children:"Finished"})}if(t>=e.clientTasks.length){var r,c;return(0,n.jsxs)("button",{className:(0,w.Z)("bg-[#171717] w-full cursor-pointer text-white font-bold py-3 px-4 rounded-[20px]"),disabled:i,onClick:()=>{l(e.mission.id).then(()=>{e.onClaimed(),p.Am.success("Claimed successfully")}).catch(e=>{p.Am.error(e.message)})},children:[i?"Claiming... ":"Claim ",(0,b.w4)(null!==(r=e.mission.paying_token.address)&&void 0!==r?r:"",null!==(c=e.mission.paying_amount)&&void 0!==c?c:0)," ",e.mission.paying_token.symbol]})}let d=e.clientTasks[t],m=N[d.type],u="client_task_"+e.mission.id+"_"+d.type+"_"+t;return(0,n.jsx)(m,{missionId:e.mission.id,index:t,task:d,taskId:u,onFinished:()=>s(t+1)},u)},k=s(990);let C=e=>{var t;let{type:s,mission:a,onClaimed:l}=e,i=a.status.current>=a.status.required,{claimMission:r,loading:c}=o(),d=async()=>{await r(a.id).then(()=>{p.Am.success("Task claimed successfully"),l()}).catch(e=>p.Am.error(e.message))};return(0,n.jsxs)("div",{className:"bg-white rounded-[16px] flex flex-col justify-between h-full text-[12px] p-[16px]",children:[(0,n.jsx)("div",{className:"flex justify-between",children:(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsx)("h3",{className:"font-bold text-gray-900",children:a.name}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:a.description}),(0,n.jsxs)("p",{className:(0,w.Z)("font-semibold mt-2",a.paying_token.address===b.ZD.Address?"text-[#F0B90B]":"text-green-500"),children:["+",(0,b.w4)(a.paying_token.address,a.paying_amount)," ",a.paying_token.symbol]})]})}),"invite"===s?(0,n.jsxs)("div",{className:"flex mt-2 justify-between",children:[i?a.claimed_at?(0,n.jsx)("div",{className:"flex bg-green-500 text-white w-fit px-6 h-[38px] items-center font-semibold rounded-[30px]",children:"Finished"}):(0,n.jsx)("button",{onClick:d,disabled:c,className:"flex bg-[#171717] cursor-pointer text-white w-fit px-6 h-[38px] items-center font-semibold rounded-[30px]",children:"Claim"}):(0,n.jsx)(x(),{href:"/referrals",children:(0,n.jsx)("div",{className:"flex bg-[#171717] cursor-pointer text-white w-fit px-6 h-[38px] items-center font-semibold rounded-[30px]",children:"Invite"})}),(0,n.jsx)("div",{className:"flex items-center justify-center relative min-w-[66px] w-[60px]",children:!0!==a.status.current&&!0!==a.status.required?(0,n.jsxs)("div",{className:"flex border-2 border-[#999] text-[#999] px-6 h-[38px] items-center font-semibold rounded-[30px]",children:[a.status.current,"/",a.status.required]}):null})]}):null,"available"===s&&(0,n.jsx)("div",{className:"flex items-center justify-center relative mt-2 min-w-[66px]",children:(0,n.jsx)(_,{mission:a,clientTasks:null!==(t=a.client_tasks)&&void 0!==t?t:[],onClaimed:l})})]})};function S(){let{mutate:e}=(0,m.kY)(),{data:t,mutate:s}=function(){let[e,t]=(0,a.useState)(!0),{data:s,mutate:n}=(0,m.ZP)("/meshmain/mission",async function(e){try{return t(!0),(await (0,c._i)(e)).data}catch(e){throw(0,d.C)(e)}finally{t(!1)}});return{data:s,loading:e,mutate:n}}(),l="invite_",i=null==t?void 0:t.filter(e=>e.id.toLowerCase().startsWith(l)),r=null==t?void 0:t.filter(e=>!e.id.toLowerCase().startsWith(l)),[,o]=(0,a.useState)(0),u=(0,a.useRef)([]);(0,a.useEffect)(()=>{o(Math.max(...u.current.map(e=>(null==e?void 0:e.clientHeight)||0)))},[t]);let x=async()=>{await s(),await e((0,k.t)())};return(0,n.jsx)("div",{className:"mt-[47px]",children:(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Available Tasks"}),r?(0,n.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:null==r?void 0:r.map((e,t)=>(0,n.jsx)("div",{ref:e=>{u.current[t]=e},children:(0,n.jsx)(C,{availableMissions:r,type:"available",onClaimed:x,mission:e})},t))}):(0,n.jsx)("div",{className:"flex h-[200px] justify-center items-center w-full text-secondary",children:(0,n.jsxs)("div",{className:"max-w-[370px] text-center",children:[(0,n.jsx)(f(),{className:"mx-auto mb-2",src:"/assets/images/empty_state.svg",alt:"Icon Empty",width:64,height:40}),(0,n.jsx)("span",{className:"max-w-[100px]",children:"There is no quest to available tasks yet!"})]})})]}),(0,n.jsxs)("div",{className:"mt-10",children:[(0,n.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Invite friends"}),i?(0,n.jsxs)("div",{className:"grid  grid-cols-1 sm:grid-cols-2 md:grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-2",children:[null==i?void 0:i.map((e,t)=>(0,n.jsx)("div",{children:(0,n.jsx)(C,{type:"invite",onClaimed:x,mission:e})},t))," "]}):(0,n.jsx)("div",{className:"flex h-[200px] justify-center items-center w-full text-secondary",children:(0,n.jsxs)("div",{className:"max-w-[370px] text-center",children:[(0,n.jsx)(f(),{className:"mx-auto mb-2",src:"/assets/images/empty_state.svg",alt:"Icon Empty",width:64,height:40}),(0,n.jsx)("span",{className:"max-w-[100px]",children:"There is no quest to invite friends yet!"})]})})]})]})})}var I=s(7250),F=s(9634);let T=()=>{let e=new l.S({defaultOptions:{queries:{staleTime:1/0}}});return(0,n.jsxs)(i.aH,{client:e,children:[(0,n.jsx)(I.h,{title:"Rewards - MeshChain",description:""}),(0,n.jsx)(F.Z,{}),(0,n.jsx)(S,{})]})};T.getLayout=e=>(0,n.jsx)(r.Z,{children:e});var Z=!0,A=T}},function(e){e.O(0,[454,962,730,106,878,600,953,888,774,179],function(){return e(e.s=2197)}),_N_E=e.O()}]);